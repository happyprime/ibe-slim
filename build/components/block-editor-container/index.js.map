{"version":3,"file":"index.js","names":["_classnames2","_interopRequireDefault","require","_compose","_editor","_data","_clickOutside","_blockEditorContents","_hotSwapper","_jsxRuntime","SIZE_LARGE","SIZE_MEDIUM","BlockEditorContainer","props","children","settings","className","onError","renderMoreMenu","onLoad","onInput","onChange","blocks","isEditorReady","editorMode","isEditing","setEditing","fixedToolbar","isPreview","_useResizeObserver","useResizeObserver","_useResizeObserver2","_slicedToArray2","resizeListener","width","classes","classnames","_defineProperty2","jsx","jsxs","ErrorBoundary","onOutside","onFocus","_default","exports","compose","withSelect","select","_ref","_select","getEditorMode","isFeatureActive","isOptionActive","editor","hasFixedToolbar","withDispatch","dispatch","_dispatch"],"sources":["../../../src/components/block-editor-container/index.js"],"sourcesContent":["// @ts-nocheck\n/**\n * External dependencies\n */\n\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { compose, useResizeObserver } from '@wordpress/compose';\nimport { ErrorBoundary } from '@wordpress/editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport ClickOutsideWrapper from './click-outside';\nimport BlockEditorContents from '../block-editor-contents';\nimport HotSwapper from './hot-swapper';\nimport './style.scss';\n\n/** @typedef {import('../../index').BlockEditorSettings} BlockEditorSettings */\n/** @typedef {import('../../index').OnError} OnError */\n/** @typedef {import('../../index').OnMore} OnMore */\n/** @typedef {import('../../store/editor/reducer').EditorMode} EditorMode */\n/** @typedef {import('../../index').OnLoad} OnLoad */\n/** @typedef {import('../block-editor-contents/index').OnUpdate} OnUpdate */\n\n/**\n * Set editing callback\n *\n * @callback OnSetEditing\n * @param {boolean} isEditing\n */\n\nconst SIZE_LARGE = 720;\nconst SIZE_MEDIUM = 480;\n\n/**\n * Contains the block contents. Handles the hot-swapping of the redux stores, as well as applying the root CSS classes\n *\n * @param {Object} props - Component props\n * @param {Object} props.children - Child components\n * @param {boolean} props.isEditorReady - The editor is ready for editing\n * @param {boolean} props.isEditing - This editor is being edited in\n * @param {boolean} props.isPreview - Whether preview mode is enabled\n * @param {boolean} props.fixedToolbar - Has fixed toolbar\n * @param {EditorMode} props.editorMode - 'text' or 'visual'\n * @param {string} props.className - additional class names\n * @param {BlockEditorSettings} props.settings - Settings\n * @param {OnError} props.onError - Error callback\n * @param {OnMore} props.renderMoreMenu - Callback to render additional items in the more menu\n * @param {OnSetEditing} props.setEditing - Set the mode to editing\n * @param {OnLoad} props.onLoad - Load initial blocks\n * @param {OnUpdate} [props.onInput] - Gutenberg's onInput callback\n * @param {OnUpdate} [props.onChange] - Gutenberg's onChange callback\n * @param {object[]} [props.blocks] - Gutenberg's blocks\n */\nfunction BlockEditorContainer( props ) {\n\tconst { children, settings, className, onError, renderMoreMenu, onLoad, onInput, onChange, blocks } = props;\n\tconst { isEditorReady, editorMode, isEditing, setEditing, fixedToolbar, isPreview } = props;\n\tconst [ resizeListener, { width } ] = useResizeObserver();\n\tconst classes = classnames( className, {\n\t\t'iso-editor': true,\n\n\t\t'is-large': width ? width >= SIZE_LARGE : false,\n\t\t'is-medium': width ? width >= SIZE_MEDIUM && width < SIZE_LARGE : true,\n\t\t'is-small': width ? width < SIZE_MEDIUM : false,\n\n\t\t'iso-editor__loading': ! isEditorReady,\n\t\t'iso-editor__selected': isEditing,\n\n\t\t// Match Gutenberg\n\t\t'block-editor': true,\n\t\t'edit-post-layout': true,\n\t\t'has-fixed-toolbar': fixedToolbar,\n\t\t[ 'is-mode-' + editorMode ]: true,\n\t\t'is-preview-mode': isPreview,\n\t} );\n\n\treturn (\n\t\t<div className={ classes }>\n\t\t\t<ErrorBoundary onError={ onError }>\n\t\t\t\t<HotSwapper />\n\n\t\t\t\t{ resizeListener }\n\n\t\t\t\t<ClickOutsideWrapper\n\t\t\t\t\tonOutside={ () => setEditing( false ) }\n\t\t\t\t\tonFocus={ () => ! isEditing && setEditing( true ) }\n\t\t\t\t>\n\t\t\t\t\t<BlockEditorContents\n\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\trenderMoreMenu={ renderMoreMenu }\n\t\t\t\t\t\tonLoad={ onLoad }\n\t\t\t\t\t\tonInput={ onInput }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</BlockEditorContents>\n\t\t\t\t</ClickOutsideWrapper>\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { settings } ) => {\n\t\tconst { isEditorReady, getEditorMode, isEditing, isFeatureActive, isOptionActive } = select(\n\t\t\t'isolated/editor'\n\t\t);\n\n\t\treturn {\n\t\t\tisEditorReady: isEditorReady(),\n\t\t\teditorMode: getEditorMode(),\n\t\t\tisEditing: isEditing(),\n\t\t\tfixedToolbar: isFeatureActive( 'fixedToolbar', settings?.editor.hasFixedToolbar ),\n\t\t\tisPreview: isOptionActive( 'preview' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { setEditing } = dispatch( 'isolated/editor' );\n\n\t\treturn {\n\t\t\tsetEditing,\n\t\t};\n\t} ),\n] )( BlockEditorContainer );\n"],"mappings":"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","ignoreList":[]}