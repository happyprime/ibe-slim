{"version":3,"file":"index.js","names":["_compose","require","_data","_i18n","_components","_blockEditor","_icons","_element","_keyboardShortcuts","_redo","_interopRequireDefault","_undo","_blockNavigation","_jsxRuntime","preventDefault","event","HeaderToolbar","props","_props$settings","inserterButton","useRef","_useDispatch","useDispatch","setIsInserterOpened","setIsListViewOpened","isMobileViewport","useViewportMatch","_useSelect","useSelect","select","_select","hasInserterItems","getBlockRootClientId","getBlockSelectionEnd","_select2","isListViewOpened","_select3","keyboardShortcutsStore","getShortcutRepresentation","fixedToolbar","isFeatureActive","isInserterEnabled","getEditorMode","getEditorSettings","richEditingEnabled","isListViewOpen","isTextModeEnabled","previewDeviceType","isInserterOpened","showIconLabels","listViewShortcut","isLargeViewport","_props$settings$iso$t","settings","iso","toolbar","inserter","navigation","undo","selectorTool","inserterInSidebar","sidebar","displayBlockToolbar","toolbarAriaLabel","__","openInserter","useCallback","toggleListView","jsx","NavigableToolbar","className","children","jsxs","ToolbarItem","ref","as","Button","isPressed","onMouseDown","onClick","disabled","isPrimary","icon","plus","label","_x","showTooltip","Popover","position","onClose","anchor","current","__experimentalLibrary","showMostUsedBlocks","showInserterHelpPanel","onSelect","ToolSelector","EditorHistoryUndo","variant","undefined","EditorHistoryRedo","BlockNavigationDropdown","isDisabled","listView","shortcut","_default","exports"],"sources":["../../../../src/components/block-editor-toolbar/header-toolbar/index.js"],"sourcesContent":["// @ts-nocheck\n/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, _x } from '@wordpress/i18n';\nimport { ToolbarItem, Button, Popover } from '@wordpress/components';\nimport { NavigableToolbar, __experimentalLibrary as Library, ToolSelector } from '@wordpress/block-editor';\nimport { plus, listView } from '@wordpress/icons';\nimport { useRef, useCallback } from '@wordpress/element';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\n\n/**\n * Internal dependencies\n */\nimport EditorHistoryRedo from './redo';\nimport EditorHistoryUndo from './undo';\nimport BlockNavigationDropdown from '../block-navigation';\nimport './style.scss';\n\nconst preventDefault = ( event ) => {\n\tevent.preventDefault();\n};\n\nfunction HeaderToolbar( props ) {\n\tconst inserterButton = useRef();\n\tconst { setIsInserterOpened, setIsListViewOpened } = useDispatch( 'isolated/editor' );\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst {\n\t\tfixedToolbar,\n\t\tisInserterEnabled,\n\t\tisTextModeEnabled,\n\t\tshowIconLabels,\n\t\tpreviewDeviceType,\n\t\tisInserterOpened,\n\t\tisListViewOpen,\n\t\tlistViewShortcut,\n\t} = useSelect( ( select ) => {\n\t\tconst { hasInserterItems, getBlockRootClientId, getBlockSelectionEnd } = select( 'core/block-editor' );\n\t\tconst { isListViewOpened } = select( 'isolated/editor' );\n\t\t// @ts-ignore\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\n\n\t\treturn {\n\t\t\t// @ts-ignore\n\t\t\tfixedToolbar: select( 'isolated/editor' ).isFeatureActive( 'fixedToolbar' ),\n\t\t\t// This setting (richEditingEnabled) should not live in the block editor's setting.\n\t\t\tisInserterEnabled:\n\t\t\t\t// @ts-ignore\n\t\t\t\tselect( 'isolated/editor' ).getEditorMode() === 'visual' &&\n\t\t\t\t// @ts-ignore\n\t\t\t\tselect( 'core/editor' ).getEditorSettings().richEditingEnabled &&\n\t\t\t\t// @ts-ignore\n\t\t\t\thasInserterItems( getBlockRootClientId( getBlockSelectionEnd() ) ),\n\t\t\t// @ts-ignore\n\t\t\tisListViewOpen: isListViewOpened(),\n\t\t\t// @ts-ignore\n\t\t\tisTextModeEnabled: select( 'isolated/editor' ).getEditorMode() === 'text',\n\t\t\tpreviewDeviceType: 'Desktop',\n\t\t\t// @ts-ignore\n\t\t\tisInserterOpened: select( 'isolated/editor' ).isInserterOpened(),\n\t\t\tshowIconLabels: false, // Not implemented yet\n\t\t\tlistViewShortcut: getShortcutRepresentation( 'core/edit-post/toggle-list-view' ),\n\t\t};\n\t}, [] );\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst { inserter, navigation, undo, selectorTool } = props.settings.iso.toolbar;\n\tconst inserterInSidebar = props.settings?.iso?.sidebar?.inserter || false;\n\tconst displayBlockToolbar = !isLargeViewport || previewDeviceType !== 'Desktop' || fixedToolbar;\n\tconst toolbarAriaLabel = displayBlockToolbar\n\t\t? /* translators: accessibility text for the editor toolbar when Top Toolbar is on */\n\t\t__( 'Document and block tools' )\n\t\t: /* translators: accessibility text for the editor toolbar when Top Toolbar is off */\n\t\t__( 'Document tools' );\n\tconst openInserter = useCallback( () => {\n\t\tif ( isInserterOpened ) {\n\t\t\t// Focusing the inserter button closes the inserter popover\n\t\t\t// @ts-ignore\n\t\t\tsetIsInserterOpened( false );\n\t\t} else {\n\t\t\tsetIsInserterOpened( true );\n\t\t}\n\t}, [ isInserterOpened, setIsInserterOpened ] );\n\n\tconst toggleListView = useCallback( () => setIsListViewOpened( !isListViewOpen ), [\n\t\tsetIsListViewOpened,\n\t\tisListViewOpen,\n\t] );\n\n\treturn (\n\t\t<NavigableToolbar className=\"editor-document-tools edit-post-header-toolbar\" aria-label={ toolbarAriaLabel }>\n\t\t\t{ ( inserter || undo || navigation || selectorTool ) && (\n\t\t\t\t<div className=\"editor-document-tools__left edit-post-header-toolbar__left\">\n\t\t\t\t\t{ inserter && (\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tref={ inserterButton }\n\t\t\t\t\t\t\tas={ Button }\n\t\t\t\t\t\t\tclassName=\"editor-document-tools__inserter-toggle\"\n\t\t\t\t\t\t\tisPressed={ isInserterOpened }\n\t\t\t\t\t\t\tonMouseDown={ preventDefault }\n\t\t\t\t\t\t\tonClick={ openInserter }\n\t\t\t\t\t\t\tdisabled={ !isInserterEnabled }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16\n\t\t\t\t\tcharacters. */\n\t\t\t\t\t\t\tlabel={ _x( 'Toggle block inserter', 'Generic label for block inserter button' ) }\n\t\t\t\t\t\t\tshowTooltip={ !showIconLabels }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ isInserterOpened && !inserterInSidebar && (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\t\t\tonClose={ () => setIsInserterOpened( false ) }\n\t\t\t\t\t\t\tanchor={ inserterButton.current }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Library\n\t\t\t\t\t\t\t\tshowMostUsedBlocks={ false }\n\t\t\t\t\t\t\t\tshowInserterHelpPanel\n\t\t\t\t\t\t\t\tonSelect={ () => {\n\t\t\t\t\t\t\t\t\tif ( isMobileViewport ) {\n\t\t\t\t\t\t\t\t\t\tsetIsInserterOpened( false );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ selectorTool && <ToolSelector /> }\n\t\t\t\t\t{ undo && (\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryUndo }\n\t\t\t\t\t\t\tshowTooltip={ !showIconLabels }\n\t\t\t\t\t\t\tvariant={ showIconLabels ? 'tertiary' : undefined }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ undo && (\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryRedo }\n\t\t\t\t\t\t\tshowTooltip={ !showIconLabels }\n\t\t\t\t\t\t\tvariant={ showIconLabels ? 'tertiary' : undefined }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ navigation && !inserterInSidebar && (\n\t\t\t\t\t\t<ToolbarItem as={ BlockNavigationDropdown } isDisabled={ isTextModeEnabled } />\n\t\t\t\t\t) }\n\t\t\t\t\t{ navigation && inserterInSidebar && (\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ Button }\n\t\t\t\t\t\t\tclassName=\"edit-post-header-toolbar__list-view-toggle\"\n\t\t\t\t\t\t\ticon={ listView }\n\t\t\t\t\t\t\tdisabled={ isTextModeEnabled }\n\t\t\t\t\t\t\tisPressed={ isListViewOpen }\n\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\t\t\tlabel={ __( 'List View' ) }\n\t\t\t\t\t\t\tonClick={ toggleListView }\n\t\t\t\t\t\t\tshortcut={ listViewShortcut }\n\t\t\t\t\t\t\tshowTooltip={ !showIconLabels }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default HeaderToolbar;\n"],"mappings":"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","ignoreList":[]}