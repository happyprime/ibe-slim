{"version":3,"file":"visual-editor.js","names":["_blockEditor","require","_element","_data","_compose","_blocks","_editor","_editorHeadingSlot","_interopRequireDefault","_footerSlot","_jsxRuntime","isGutenbergPlugin","VisualEditor","_useSelect","useSelect","select","_select","isFeatureActive","_select2","editorStore","getCurrentPostId","getCurrentPostType","getEditorSettings","_select3","blocksStore","getBlockTypes","_isTemplateMode","postTypeSlug","_wrapperBlockName","editorSettings","deviceType","isWelcomeGuideVisible","isTemplateMode","postContentAttributes","editedPostTemplate","undefined","wrapperBlockName","wrapperUniqueId","isBlockBasedTheme","__unstableIsBlockBasedTheme","hasV3BlocksOnly","every","type","apiVersion","_useSelect2","isCleanNewPost","ref","useRef","contentRef","useMergeRefs","useTypewriter","titleRef","useEffect","_titleRef$current","current","focus","jsx","BlockTools","__unstableContentRef","className","children","jsxs","BlockCanvas","shouldIframe","height","Slot","mode","RecursionProvider","blockName","uniqueId","BlockList"],"sources":["../../../src/components/block-editor/visual-editor.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tBlockCanvas,\n\tBlockList,\n\tBlockTools,\n\t__unstableUseTypewriter as useTypewriter,\n\tRecursionProvider,\n// @ts-ignore\n} from '@wordpress/block-editor';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useMergeRefs } from '@wordpress/compose';\n// @ts-ignore\nimport { parse, store as blocksStore } from '@wordpress/blocks';\n// @ts-ignore\nimport { store as editorStore } from '@wordpress/editor';\n\n// @ts-ignore\nconst isGutenbergPlugin = true;\n\n/**\n * Internal dependencies\n */\nimport EditorHeading from '../editor-heading-slot';\nimport FooterSlot from '../footer-slot';\n\n/**\n * This is a copy of packages/edit-post/src/components/visual-editor/index.js\n *\n * The original is not exported, and contains code for post titles\n *\n * @param {Object} args\n * @param args.styles\n */\nexport default function VisualEditor() {\n\tconst {\n\t\tisWelcomeGuideVisible,\n\t\twrapperBlockName,\n\t\twrapperUniqueId,\n\t\t// @ts-ignore\n\t\tisBlockBasedTheme,\n\t\t// @ts-ignore\n\t\thasV3BlocksOnly,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tisFeatureActive,\n\t\t} = select( 'isolated/editor' );\n\t\tconst { getCurrentPostId, getCurrentPostType, getEditorSettings } =\n\t\t\tselect( editorStore );\n\t\tconst { getBlockTypes } = select( blocksStore );\n\t\tconst _isTemplateMode = false;\n\t\tconst postTypeSlug = getCurrentPostType();\n\t\tlet _wrapperBlockName;\n\n\t\tif ( postTypeSlug === 'wp_block' ) {\n\t\t\t_wrapperBlockName = 'core/block';\n\t\t} else if ( ! _isTemplateMode ) {\n\t\t\t_wrapperBlockName = 'core/post-content';\n\t\t}\n\n\t\tconst editorSettings = getEditorSettings();\n\n\t\treturn {\n\t\t\tdeviceType: 'Desktop',\n\t\t\t// @ts-ignore\n\t\t\tisWelcomeGuideVisible: isFeatureActive( 'welcomeGuide' ),\n\t\t\tisTemplateMode: _isTemplateMode,\n\t\t\tpostContentAttributes: getEditorSettings().postContentAttributes,\n\t\t\t// Post template fetch returns a 404 on classic themes, which\n\t\t\t// messes with e2e tests, so check it's a block theme first.\n\t\t\teditedPostTemplate: undefined,\n\t\t\twrapperBlockName: _wrapperBlockName,\n\t\t\twrapperUniqueId: getCurrentPostId(),\n\t\t\tisBlockBasedTheme: editorSettings.__unstableIsBlockBasedTheme,\n\t\t\thasV3BlocksOnly: getBlockTypes().every( ( type ) => {\n\t\t\t\treturn type.apiVersion >= 3;\n\t\t\t} ),\n\t\t};\n\t}, [] );\n\t// @ts-ignore\n\tconst { isCleanNewPost } = useSelect( editorStore );\n\n\tconst ref = useRef();\n\tconst contentRef = useMergeRefs( [ ref, useTypewriter() ] );\n\n\tconst titleRef = useRef();\n\tuseEffect( () => {\n\t\tif ( isWelcomeGuideVisible || ! isCleanNewPost() ) {\n\t\t\treturn;\n\t\t}\n\t\t// @ts-ignore\n\t\ttitleRef?.current?.focus();\n\t}, [ isWelcomeGuideVisible, isCleanNewPost ] );\n\n\treturn (\n\t\t<BlockTools\n\t\t\t__unstableContentRef={ ref }\n\t\t\tclassName={ 'edit-post-visual-editor' }\n\t\t>\n\t\t\t<BlockCanvas\n\t\t\t\tshouldIframe={ false }\n\t\t\t\tcontentRef={ contentRef }\n\t\t\t\theight=\"100%\"\n\t\t\t>\n\t\t\t\t<EditorHeading.Slot mode=\"visual\" />\n\n\t\t\t\t<RecursionProvider\n\t\t\t\t\tblockName={ wrapperBlockName }\n\t\t\t\t\tuniqueId={ wrapperUniqueId }\n\t\t\t\t>\n\t\t\t\t\t<BlockList />\n\t\t\t\t</RecursionProvider>\n\n\t\t\t\t<FooterSlot.Slot mode=\"visual\" />\n\t\t\t</BlockCanvas>\n\t\t</BlockTools>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}